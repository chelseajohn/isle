<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>isle: Measurements</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script src="striped_bg.js"></script>
<link href="that_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">isle
   &#160;<span id="projectnumber">0.2</span>
   </div>
   <div id="projectbrief">Lattice Monte Carlo for Carbon Nanostructures</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('measdoc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Measurements </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Needs to be completely rewritten!</dd></dl>
<p>Measurements are a uniform mechanism to extract information from gauge configurations. They can be called both during HMC as 'inline' measurements or afterwards as 'out-of-line' measurements. A number of fairly general purpose measurements are defined in namespace cns.meas. See section Canonical Implementation for details on how to write those measurements.</p>
<p>Inline measurements represent a general hook into the Hybrid Monte Carlo function provided by cns.hmc. Measurements are run after each Metropolis accept-reject step so they can be used for a number of tasks. For instance, cns.hmc.hmc does not store or output intermediate results by itself. Instead, a measurement can be used to save configurations to disk. Other possible usage cases would be checkpointing or logging information to the terminal.</p>
<h2>Interface</h2>
<p>An inline measurement must be a callable with parameters <code>phi, inline, itr, act, acc</code>, where</p><ul>
<li><b><code>phi</code></b> - configuration,</li>
<li><b><code>inline</code></b> - <code>True</code> when called inline of HMC,</li>
<li><b><code>itr</code></b> - trajectory index,</li>
<li><b><code>act</code></b> - action given configuration <code>phi</code>,</li>
<li><b><code>acc</code></b> - <code>True</code> if trajectory was accepted, <code>False</code> otherwise.</li>
<li><b><code>rng</code></b> - A random number generator that implements cns.random.RNGWrapper.</li>
</ul>
<p><code>phi</code> and <code>inline</code> are called by position whereas <code>itr</code>, <code>act</code>, <code>acc</code>, and <code>rng</code> are called by name. The return value is ignored when the measurement is called in-line.</p>
<p>Out-of-line measurements can have an arbitrary interface because they are only called by the user. However, in order to provide a uniform way of calling both inline and out-of-line measurements, the recommended implementation is </p><div class="fragment"><div class="line"><span class="keyword">def </span>myMeas(phi, inline=False, **kwargs):</div><div class="line">    <span class="comment"># ...</span></div></div><!-- fragment --><p> for functions and </p><div class="fragment"><div class="line"><span class="keyword">class </span>MyMeas:</div><div class="line">    <span class="comment"># ...</span></div><div class="line"></div><div class="line">    <span class="keyword">def </span>__call__(self, phi, inline=False, **kwargs):</div><div class="line">        <span class="comment"># ...</span></div></div><!-- fragment --><p> for callable classes. This can accommodate the special arguments passed to inline measurements which might not be available out-of-line as well as possible extra arguments used with out-of-line measurements not available inline.</p>
<h2>Canonical Implementation</h2>
<p>All measurements in package cns.meas follow the same implementation scheme. Each measurement is a class with a name in UpperCamelCase defined in its own file of the same name but in lowerCamelCase. Measurements not defined in cns.meas can have any format as long as the satisfy the interface described above.</p>
<p>As an example, look at the following: </p><div class="fragment"><div class="line"><span class="comment"># file acceptanceRate.py</span></div><div class="line"></div><div class="line"><span class="keyword">class </span>AcceptanceRate:</div><div class="line">    <span class="keyword">def </span>__call__(self, phi, inline=False, **kwargs):</div><div class="line">        <span class="comment"># ...</span></div><div class="line"></div><div class="line">    <span class="comment"># ...</span></div></div><!-- fragment --><p> This allows for the class to be found by the import script and it can be used as </p><div class="fragment"><div class="line"><span class="comment"># some other file</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> cns</div><div class="line"><span class="keyword">import</span> cns.meas  <span class="comment"># meas is not imported by cns base package</span></div><div class="line"></div><div class="line">accMeas = cns.meas.AcceptanceRate()</div></div><!-- fragment --><p> If a different naming scheme is used or there are multiple measurements in one module, the name of the module must be used: </p><div class="fragment"><div class="line"><span class="keyword">import</span> cns</div><div class="line"><span class="keyword">import</span> cns.meas  <span class="comment"># still need this</span></div><div class="line"></div><div class="line">nonCanMeas = cns.meas.non_canonocal_module.NonCanonicalMeasurement()</div></div><!-- fragment --><p> If a module contains extra functions or classes besides the central measurement, those can only be addressed using the full module name as well. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
